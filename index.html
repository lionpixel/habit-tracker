<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planejador Visual de Metas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
    <style>
        :root {
            --primary: #3b82f6;
            --primary-dark: #1d4ed8;
            --secondary: #10b981;
            --secondary-dark: #059669;
            --accent: #8b5cf6;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #0f172a;
            --darker: #020617;
            --card-bg: #1e293b;
            --light: #f8fafc;
            --gray: #94a3b8;
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--darker), #1e1b4b);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--gray);
            font-size: 1.1rem;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-title {
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-success {
            background: var(--secondary);
            color: white;
        }

        .btn-success:hover {
            background: var(--secondary-dark);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-outline {
            background: transparent;
            color: var(--gray);
            border: 1px solid var(--gray);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 0.8rem;
        }

        .btn-icon {
            padding: 8px 12px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Year Goals */
        .year-goals {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .year-goal {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid var(--accent);
            transition: var(--transition);
        }

        .year-goal:hover {
            transform: translateY(-3px);
            background: rgba(30, 41, 59, 0.9);
        }

        .goal-progress {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Current Month */
        .month-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .current-month {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--light);
        }

        .month-nav {
            display: flex;
            gap: 10px;
        }

        .month-goals {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .month-goal {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid var(--primary);
        }

        .goal-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* Weekly View */
        .weekly-view {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 900px) {
            .weekly-view {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .weekly-view {
                grid-template-columns: 1fr;
            }
        }

        .day-card {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 10px;
            padding: 20px;
            min-height: 300px;
            transition: var(--transition);
        }

        .day-card:hover {
            background: rgba(30, 41, 59, 0.9);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .day-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .day-date {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .priority-a {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--danger);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .priority-f {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid var(--warning);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .priority-label {
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .task-time {
            background: var(--primary);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .habits-list {
            margin-top: 15px;
        }

        .habit-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .habit-checkbox {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid var(--gray);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .habit-checkbox.checked {
            background: var(--secondary);
            border-color: var(--secondary);
        }

        .habit-checkbox.checked::after {
            content: "✓";
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        /* Calendar */
        .calendar {
            margin-top: 20px;
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--gray);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 8px;
            padding: 10px;
            min-height: 80px;
            font-size: 0.9rem;
        }

        .calendar-day.empty {
            background: transparent;
        }

        .calendar-day.current {
            background: rgba(59, 130, 246, 0.3);
            border: 1px solid var(--primary);
        }

        .calendar-day-number {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .calendar-day-tasks {
            font-size: 0.7rem;
            color: var(--gray);
            margin-top: 5px;
        }

        /* Insights */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .insight-card {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .insight-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .insight-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            animation: modalFade 0.3s ease;
        }

        @keyframes modalFade {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }

        .tab {
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .tab.active {
            background: var(--primary);
        }

        .tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Pomodoro Timer */
        .pomodoro-timer {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        .timer-display {
            font-size: 3rem;
            font-weight: 700;
            margin: 20px 0;
            font-family: monospace;
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--gray);
            font-size: 0.9rem;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .badge-primary {
            background: var(--primary);
            color: white;
        }

        .badge-success {
            background: var(--secondary);
            color: white;
        }

        .badge-warning {
            background: var(--warning);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-bullseye"></i> Planejador Visual de Metas</h1>
            <p class="subtitle">Controle anual, mensal e diário de metas, hábitos e tarefas</p>
        </header>

        <div class="dashboard">
            <div class="main-content">
                <!-- Visão Anual -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-calendar-alt"></i> Meta do Ano: 2026</h2>
                        <button class="btn btn-primary" id="addYearGoalBtn">
                            <i class="fas fa-plus"></i> Adicionar Meta
                        </button>
                    </div>
                    <div class="year-goals" id="yearGoalsContainer">
                        <!-- Metas anuais serão inseridas aqui -->
                    </div>
                </div>

                <!-- Visão Mensal -->
                <div class="card">
                    <div class="month-header">
                        <div>
                            <h2 class="card-title"><i class="fas fa-calendar"></i> Meta do Mês</h2>
                            <div class="current-month" id="currentMonth">JANEIRO 2026</div>
                        </div>
                        <div class="month-nav">
                            <button class="btn btn-outline btn-sm" id="prevMonthBtn"><i class="fas fa-chevron-left"></i></button>
                            <button class="btn btn-outline btn-sm" id="nextMonthBtn"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="month-goals" id="monthGoalsContainer">
                        <!-- Metas mensais serão inseridas aqui -->
                    </div>
                </div>

                <!-- Visão Semanal -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-calendar-week"></i> Planejamento Semanal</h2>
                        <button class="btn btn-success" id="addWeekTaskBtn">
                            <i class="fas fa-plus"></i> Adicionar Tarefa
                        </button>
                    </div>
                    
                    <div class="tabs">
                        <div class="tab active" data-tab="week-view">Visão Semanal</div>
                        <div class="tab" data-tab="pomodoro">Pomodoro Timer</div>
                    </div>
                    
                    <div class="tab-content active" id="week-view">
                        <div class="weekly-view" id="weeklyView">
                            <!-- Dias da semana serão inseridos aqui -->
                        </div>
                    </div>
                    
                    <div class="tab-content" id="pomodoro">
                        <div class="pomodoro-timer">
                            <h3><i class="fas fa-clock"></i> Pomodoro Timer</h3>
                            <div class="timer-display" id="timerDisplay">25:00</div>
                            <div class="timer-controls">
                                <button class="btn btn-success" id="startTimerBtn">Iniciar</button>
                                <button class="btn btn-danger" id="stopTimerBtn">Parar</button>
                                <button class="btn btn-outline" id="resetTimerBtn">Resetar</button>
                            </div>
                            <p style="margin-top: 15px; color: var(--gray);">Trabalhe por 25 minutos, descanse por 5 minutos</p>
                        </div>
                    </div>
                </div>

                <!-- Calendário Mensal -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-calendar-days"></i> Calendário do Mês</h2>
                    </div>
                    <div class="calendar" id="calendarContainer">
                        <!-- Calendário será gerado aqui -->
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <!-- Insights e Estatísticas -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-chart-line"></i> Insights</h2>
                    </div>
                    <div class="insights-grid">
                        <div class="insight-card">
                            <div class="insight-value" id="completionRate">0%</div>
                            <div class="insight-label">Taxa de Conclusão</div>
                        </div>
                        <div class="insight-card">
                            <div class="insight-value" id="tasksCompleted">0</div>
                            <div class="insight-label">Tarefas Concluídas</div>
                        </div>
                        <div class="insight-card">
                            <div class="insight-value" id="pomodorosToday">0</div>
                            <div class="insight-label">Pomodoros Hoje</div>
                        </div>
                        <div class="insight-card">
                            <div class="insight-value" id="habitsStreak">0</div>
                            <div class="insight-label">Sequência Hábitos</div>
                        </div>
                    </div>
                </div>

                <!-- Hábitos Diários -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-check-circle"></i> Hábitos Diários</h2>
                        <button class="btn btn-outline btn-sm" id="addHabitBtn">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="habits-list" id="habitsList">
                        <!-- Hábitos serão inseridos aqui -->
                    </div>
                </div>

                <!-- Progresso Mensal -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title"><i class="fas fa-trophy"></i> Progresso do Mês</h2>
                    </div>
                    <div id="monthProgress">
                        <!-- Barras de progresso serão inseridas aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal para adicionar/editar metas -->
        <div class="modal" id="goalModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">Adicionar Nova Meta</h2>
                    <button class="btn btn-icon btn-outline" id="closeModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="goalForm">
                    <input type="hidden" id="goalId">
                    <input type="hidden" id="goalType">
                    
                    <div class="form-group">
                        <label for="goalTitle">Título da Meta</label>
                        <input type="text" id="goalTitle" required placeholder="Ex: RODAR CAS, Pesar 79,5kg">
                    </div>
                    
                    <div class="form-group">
                        <label for="goalDescription">Descrição (Opcional)</label>
                        <textarea id="goalDescription" placeholder="Detalhes da meta..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="goalTarget">Objetivo (Opcional)</label>
                        <input type="text" id="goalTarget" placeholder="Ex: BF 20%(-2% MÊS), Virilizar uma 1MDL">
                    </div>
                    
                    <div class="form-group">
                        <label for="goalProgress">Progresso Atual (%)</label>
                        <input type="range" id="goalProgress" min="0" max="100" value="0">
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span>0%</span>
                            <span id="progressValue">0%</span>
                            <span>100%</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="goalColor">Cor da Meta</label>
                        <select id="goalColor">
                            <option value="#3b82f6">Azul</option>
                            <option value="#10b981">Verde</option>
                            <option value="#8b5cf6">Roxo</option>
                            <option value="#f59e0b">Amarelo</option>
                            <option value="#ef4444">Vermelho</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" id="cancelBtn">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar Meta</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal para adicionar/editar tarefas -->
        <div class="modal" id="taskModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="taskModalTitle">Adicionar Nova Tarefa</h2>
                    <button class="btn btn-icon btn-outline" id="closeTaskModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="taskForm">
                    <input type="hidden" id="taskId">
                    
                    <div class="form-group">
                        <label for="taskTitle">Título da Tarefa</label>
                        <input type="text" id="taskTitle" required placeholder="Ex: GRAVAR VIDEO DO BUG, PROVA SOCIAL">
                    </div>
                    
                    <div class="form-group">
                        <label for="taskDay">Dia da Semana</label>
                        <select id="taskDay" required>
                            <option value="segunda">Segunda-feira</option>
                            <option value="terca">Terça-feira</option>
                            <option value="quarta">Quarta-feira</option>
                            <option value="quinta">Quinta-feira</option>
                            <option value="sexta">Sexta-feira</option>
                            <option value="sabado">Sábado</option>
                            <option value="domingo">Domingo</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="taskPriority">Prioridade</label>
                        <select id="taskPriority" required>
                            <option value="A">A - Prioridade Máxima</option>
                            <option value="F1">F1 - Secundária 1</option>
                            <option value="F2">F2 - Secundária 2</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="taskDuration">Duração (Pomodoros)</label>
                        <select id="taskDuration">
                            <option value="25">25 min (1 Pomodoro)</option>
                            <option value="50">50 min (2 Pomodoros)</option>
                            <option value="75">75 min (3 Pomodoros)</option>
                            <option value="100">100 min (4 Pomodoros)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="taskCategory">Categoria</label>
                        <select id="taskCategory">
                            <option value="Minhas Coisas">Minhas Coisas</option>
                            <option value="HABITS">HABITS</option>
                            <option value="Trabalho">Trabalho</option>
                            <option value="Pessoal">Pessoal</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" id="cancelTaskBtn">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar Tarefa</button>
                    </div>
                </form>
            </div>
        </div>

        <footer>
            <p>Planejador Visual de Metas &copy; 2026 | Mantenha o foco e alcance seus objetivos!</p>
            <p>Dados armazenados localmente no seu navegador</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        // Dados iniciais
        const DEFAULT_YEAR_GOALS = [
            { id: 1, title: "RODAR CAS", description: "Implementar e rodar sistema CAS", progress: 30, color: "#3b82f6" },
            { id: 2, title: "Pesar 79,5kg BF 20%", description: "Reduzir 2% de gordura corporal por mês", progress: 40, color: "#10b981" },
            { id: 3, title: "Virilizar uma 1MDL", description: "Alcançar 1 milhão de downloads", progress: 15, color: "#8b5cf6" },
            { id: 4, title: "Ler 12 livros", description: "Um livro por mês", progress: 25, color: "#f59e0b" }
        ];

        const DEFAULT_MONTH_GOALS = [
            { id: 1, title: "RODAR CAS", target: "Implementar primeira versão", progress: 30, color: "#3b82f6" },
            { id: 2, title: "Pesar 79,5kg BF 20%", target: "Perder 2% de gordura", progress: 40, color: "#10b981" },
            { id: 3, title: "Virilizar uma 1MDL", target: "Lançar versão beta", progress: 15, color: "#8b5cf6" }
        ];

        const DEFAULT_HABITS = [
            { id: 1, name: "LER 10 PÁGINAS", completed: true },
            { id: 2, name: "TREINO / EXERCÍCIO", completed: false },
            { id: 3, name: "INGLÊS 50min", completed: false },
            { id: 4, name: "DEVOCIONAL", completed: true }
        ];

        const WEEK_DAYS = [
            { id: "segunda", name: "Segunda", short: "SEG" },
            { id: "terca", name: "Terça", short: "TER" },
            { id: "quarta", name: "Quarta", short: "QUA" },
            { id: "quinta", name: "Quinta", short: "QUI" },
            { id: "sexta", name: "Sexta", short: "SEX" },
            { id: "sabado", name: "Sábado", short: "SAB" },
            { id: "domingo", name: "Domingo", short: "DOM" }
        ];

        // Estado da aplicação
        let currentMonth = 0; // 0 = Janeiro, 1 = Fevereiro, etc.
        let currentYear = 2026;
        let yearGoals = [];
        let monthGoals = [];
        let habits = [];
        let tasks = [];
        let selectedDay = null;
        let pomodoroTimer = null;
        let pomodoroTimeLeft = 25 * 60; // 25 minutos em segundos
        let pomodoroRunning = false;
        let pomodorosToday = 0;

        // Inicializar dados
        function initData() {
            // Carregar dados do localStorage ou usar padrões
            yearGoals = JSON.parse(localStorage.getItem("yearGoals")) || DEFAULT_YEAR_GOALS;
            monthGoals = JSON.parse(localStorage.getItem("monthGoals")) || DEFAULT_MONTH_GOALS;
            habits = JSON.parse(localStorage.getItem("habits")) || DEFAULT_HABITS;
            tasks = JSON.parse(localStorage.getItem("tasks")) || [];
            pomodorosToday = parseInt(localStorage.getItem("pomodorosToday")) || 0;
            
            // Salvar dados iniciais se for a primeira vez
            saveData();
        }

        // Salvar dados no localStorage
        function saveData() {
            localStorage.setItem("yearGoals", JSON.stringify(yearGoals));
            localStorage.setItem("monthGoals", JSON.stringify(monthGoals));
            localStorage.setItem("habits", JSON.stringify(habits));
            localStorage.setItem("tasks", JSON.stringify(tasks));
            localStorage.setItem("pomodorosToday", pomodorosToday.toString());
        }

        // Elementos DOM
        const yearGoalsContainer = document.getElementById('yearGoalsContainer');
        const monthGoalsContainer = document.getElementById('monthGoalsContainer');
        const weeklyView = document.getElementById('weeklyView');
        const calendarContainer = document.getElementById('calendarContainer');
        const habitsList = document.getElementById('habitsList');
        const monthProgress = document.getElementById('monthProgress');
        
        // Elementos de insights
        const completionRateEl = document.getElementById('completionRate');
        const tasksCompletedEl = document.getElementById('tasksCompleted');
        const pomodorosTodayEl = document.getElementById('pomodorosToday');
        const habitsStreakEl = document.getElementById('habitsStreak');
        
        // Modais
        const goalModal = document.getElementById('goalModal');
        const taskModal = document.getElementById('taskModal');
        const goalForm = document.getElementById('goalForm');
        const taskForm = document.getElementById('taskForm');
        
        // Botões
        const addYearGoalBtn = document.getElementById('addYearGoalBtn');
        const addWeekTaskBtn = document.getElementById('addWeekTaskBtn');
        const addHabitBtn = document.getElementById('addHabitBtn');
        const prevMonthBtn = document.getElementById('prevMonthBtn');
        const nextMonthBtn = document.getElementById('nextMonthBtn');
        
        // Timer Pomodoro
        const timerDisplay = document.getElementById('timerDisplay');
        const startTimerBtn = document.getElementById('startTimerBtn');
        const stopTimerBtn = document.getElementById('stopTimerBtn');
        const resetTimerBtn = document.getElementById('resetTimerBtn');

        // Inicializar a aplicação
        function initApp() {
            initData();
            renderYearGoals();
            renderMonthGoals();
            renderWeekView();
            renderCalendar();
            renderHabits();
            renderMonthProgress();
            updateInsights();
            setupEventListeners();
            
            // Inicializar tabs
            initTabs();
            
            // Atualizar timer display
            updateTimerDisplay();
        }

        // Renderizar metas anuais
        function renderYearGoals() {
            yearGoalsContainer.innerHTML = '';
            
            if (yearGoals.length === 0) {
                yearGoalsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-bullseye"></i>
                        <h3>Nenhuma meta anual definida</h3>
                        <p>Adicione suas metas para o ano de ${currentYear}</p>
                    </div>
                `;
                return;
            }
            
            yearGoals.forEach(goal => {
                const goalEl = document.createElement('div');
                goalEl.className = 'year-goal';
                goalEl.style.borderLeftColor = goal.color;
                
                goalEl.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <h3 style="margin-bottom: 5px;">${goal.title}</h3>
                            ${goal.description ? `<p style="color: var(--gray); font-size: 0.9rem; margin-bottom: 10px;">${goal.description}</p>` : ''}
                        </div>
                        <div style="display: flex; gap: 5px;">
                            <button class="btn btn-icon btn-outline btn-sm" onclick="editGoal(${goal.id}, 'year')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-icon btn-danger btn-sm" onclick="deleteGoal(${goal.id}, 'year')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="goal-progress">
                        <div class="progress-fill" style="width: ${goal.progress}%; background: ${goal.color};"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                        <span style="color: var(--gray); font-size: 0.9rem;">Progresso</span>
                        <span style="font-weight: 600;">${goal.progress}%</span>
                    </div>
                `;
                
                yearGoalsContainer.appendChild(goalEl);
            });
        }

        // Renderizar metas mensais
        function renderMonthGoals() {
            const monthNames = ["JANEIRO", "FEVEREIRO", "MARÇO", "ABRIL", "MAIO", "JUNHO", 
                               "JULHO", "AGOSTO", "SETEMBRO", "OUTUBRO", "NOVEMBRO", "DEZEMBRO"];
            
            document.getElementById('currentMonth').textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            monthGoalsContainer.innerHTML = '';
            
            // Filtrar metas do mês atual
            const currentMonthGoals = monthGoals.filter(goal => goal.month === currentMonth || goal.month === undefined);
            
            if (currentMonthGoals.length === 0) {
                monthGoalsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-flag"></i>
                        <h3>Nenhuma meta mensal definida</h3>
                        <p>Adicione suas metas para ${monthNames[currentMonth]}</p>
                    </div>
                `;
                return;
            }
            
            currentMonthGoals.forEach(goal => {
                const goalEl = document.createElement('div');
                goalEl.className = 'month-goal';
                goalEl.style.borderLeftColor = goal.color;
                
                goalEl.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <h3 style="margin-bottom: 5px;">${goal.title}</h3>
                            ${goal.target ? `<p style="color: var(--gray); font-size: 0.9rem;">${goal.target}</p>` : ''}
                        </div>
                        <div style="display: flex; gap: 5px;">
                            <button class="btn btn-icon btn-outline btn-sm" onclick="editGoal(${goal.id}, 'month')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-icon btn-danger btn-sm" onclick="deleteGoal(${goal.id}, 'month')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="goal-progress">
                        <div class="progress-fill" style="width: ${goal.progress}%; background: ${goal.color};"></div>
                    </div>
                    <div class="goal-stats">
                        <span>Progresso</span>
                        <span>${goal.progress}%</span>
                    </div>
                `;
                
                monthGoalsContainer.appendChild(goalEl);
            });
        }

        // Renderizar visão semanal
        function renderWeekView() {
            weeklyView.innerHTML = '';
            
            // Obter a data atual
            const today = new Date();
            const currentDayIndex = today.getDay(); // 0 = Domingo, 1 = Segunda, etc.
            
            // Calcular datas para cada dia da semana (começando na segunda)
            const weekDates = [];
            for (let i = 0; i < 7; i++) {
                const date = new Date(today);
                // Ajustar para começar na segunda-feira
                const dayOffset = i - (currentDayIndex === 0 ? 6 : currentDayIndex - 1);
                date.setDate(today.getDate() + dayOffset);
                weekDates.push(date);
            }
            
            WEEK_DAYS.forEach((day, index) => {
                const date = weekDates[index];
                const dayTasks = tasks.filter(task => task.day === day.id);
                const dayHabits = habits.filter(habit => habit.day === day.id || !habit.day);
                
                const dayEl = document.createElement('div');
                dayEl.className = 'day-card';
                if (date.toDateString() === today.toDateString()) {
                    dayEl.style.border = '2px solid var(--primary)';
                }
                
                // Formatar data
                const formattedDate = `${date.getDate().toString().padStart(2, '0')}/${(date.getMonth() + 1).toString().padStart(2, '0')}`;
                
                // Tarefas por prioridade
                const priorityATasks = dayTasks.filter(task => task.priority === 'A');
                const priorityFTasks = dayTasks.filter(task => task.priority === 'F1' || task.priority === 'F2');
                
                dayEl.innerHTML = `
                    <div class="day-header">
                        <div>
                            <div class="day-name">${day.name}</div>
                            <div class="day-date">${formattedDate}</div>
                        </div>
                        <button class="btn btn-success btn-sm" onclick="addTaskForDay('${day.id}')">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    ${priorityATasks.length > 0 ? `
                        <div class="priority-a">
                            <div class="priority-label"><i class="fas fa-exclamation-circle"></i> PRIORIDADE A</div>
                            ${priorityATasks.map(task => `
                                <div class="task-item">
                                    <span>${task.title}</span>
                                    <span class="task-time">${task.duration || 25}min</span>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                    
                    ${priorityFTasks.length > 0 ? `
                        <div class="priority-f">
                            <div class="priority-label"><i class="fas fa-tasks"></i> PRIORIDADES F</div>
                            ${priorityFTasks.map(task => `
                                <div class="task-item">
                                    <span>${task.title}</span>
                                    <span class="task-time">${task.duration || 25}min</span>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                    
                    ${dayHabits.length > 0 ? `
                        <div class="habits-list">
                            <div style="font-size: 0.9rem; color: var(--gray); margin-bottom: 10px;">Hábitos:</div>
                            ${dayHabits.map(habit => `
                                <div class="habit-item">
                                    <div class="habit-checkbox ${habit.completed ? 'checked' : ''}" onclick="toggleHabit(${habit.id})"></div>
                                    <span>${habit.name}</span>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                `;
                
                weeklyView.appendChild(dayEl);
            });
        }

        // Renderizar calendário
        function renderCalendar() {
            calendarContainer.innerHTML = '';
            
            const monthNames = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", 
                               "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
            
            // Criar cabeçalho do calendário
            const calendarHeader = document.createElement('div');
            calendarHeader.className = 'calendar-header';
            calendarHeader.innerHTML = `
                <div>Dom</div>
                <div>Seg</div>
                <div>Ter</div>
                <div>Qua</div>
                <div>Qui</div>
                <div>Sex</div>
                <div>Sáb</div>
            `;
            calendarContainer.appendChild(calendarHeader);
            
            // Criar grid do calendário
            const calendarGrid = document.createElement('div');
            calendarGrid.className = 'calendar-grid';
            
            // Obter primeiro dia do mês
            const firstDay = new Date(currentYear, currentMonth, 1);
            const startingDay = firstDay.getDay(); // 0 = Domingo
            
            // Obter último dia do mês
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const daysInMonth = lastDay.getDate();
            
            // Obter data atual
            const today = new Date();
            const isCurrentMonth = today.getMonth() === currentMonth && today.getFullYear() === currentYear;
            
            // Adicionar dias vazios no início
            for (let i = 0; i < startingDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Adicionar dias do mês
            for (let day = 1; day <= daysInMonth; day++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                
                // Verificar se é o dia atual
                if (isCurrentMonth && day === today.getDate()) {
                    dayEl.classList.add('current');
                }
                
                // Contar tarefas para este dia
                const dayTasks = tasks.filter(task => {
                    // Esta é uma simplificação - em um sistema real, você precisaria
                    // de datas específicas para as tarefas
                    return false;
                });
                
                dayEl.innerHTML = `
                    <div class="calendar-day-number">${day}</div>
                    ${dayTasks.length > 0 ? `<div class="calendar-day-tasks">${dayTasks.length} tarefas</div>` : ''}
                `;
                
                calendarGrid.appendChild(dayEl);
            }
            
            calendarContainer.appendChild(calendarGrid);
        }

        // Renderizar hábitos
        function renderHabits() {
            habitsList.innerHTML = '';
            
            if (habits.length === 0) {
                habitsList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-check-circle"></i>
                        <h3>Nenhum hábito definido</h3>
                        <p>Adicione hábitos para acompanhar diariamente</p>
                    </div>
                `;
                return;
            }
            
            habits.forEach(habit => {
                const habitEl = document.createElement('div');
                habitEl.className = 'habit-item';
                
                habitEl.innerHTML = `
                    <div class="habit-checkbox ${habit.completed ? 'checked' : ''}" onclick="toggleHabit(${habit.id})"></div>
                    <span>${habit.name}</span>
                    ${habit.time ? `<span style="margin-left: auto; font-size: 0.8rem; color: var(--gray);">${habit.time}</span>` : ''}
                `;
                
                habitsList.appendChild(habitEl);
            });
        }

        // Renderizar progresso mensal
        function renderMonthProgress() {
            monthProgress.innerHTML = '';
            
            // Calcular progresso médio das metas mensais
            const currentMonthGoals = monthGoals.filter(goal => goal.month === currentMonth || goal.month === undefined);
            const avgProgress = currentMonthGoals.length > 0 
                ? Math.round(currentMonthGoals.reduce((sum, goal) => sum + goal.progress, 0) / currentMonthGoals.length)
                : 0;
            
            monthProgress.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Progresso Geral</span>
                        <span>${avgProgress}%</span>
                    </div>
                    <div class="goal-progress">
                        <div class="progress-fill" style="width: ${avgProgress}%; background: var(--primary);"></div>
                    </div>
                </div>
                
                ${currentMonthGoals.map(goal => `
                    <div style="margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>${goal.title}</span>
                            <span>${goal.progress}%</span>
                        </div>
                        <div class="goal-progress">
                            <div class="progress-fill" style="width: ${goal.progress}%; background: ${goal.color};"></div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // Atualizar insights
        function updateInsights() {
            // Taxa de conclusão (média de progresso das metas mensais)
            const currentMonthGoals = monthGoals.filter(goal => goal.month === currentMonth || goal.month === undefined);
            const avgProgress = currentMonthGoals.length > 0 
                ? Math.round(currentMonthGoals.reduce((sum, goal) => sum + goal.progress, 0) / currentMonthGoals.length)
                : 0;
            
            completionRateEl.textContent = `${avgProgress}%`;
            
            // Tarefas concluídas
            const completedTasks = tasks.filter(task => task.completed).length;
            tasksCompletedEl.textContent = completedTasks;
            
            // Pomodoros hoje
            pomodorosTodayEl.textContent = pomodorosToday;
            
            // Sequência de hábitos
            const today = new Date().toDateString();
            const habitsToday = habits.filter(habit => habit.lastCompleted === today).length;
            habitsStreakEl.textContent = habitsToday > 0 ? habitsToday : 0;
        }

        // Sistema de abas
        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Remover classe active de todas as abas e conteúdos
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Adicionar classe active à aba clicada e seu conteúdo
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Botões de navegação do mês
            prevMonthBtn.addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderMonthGoals();
                renderCalendar();
                renderMonthProgress();
                updateInsights();
            });
            
            nextMonthBtn.addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderMonthGoals();
                renderCalendar();
                renderMonthProgress();
                updateInsights();
            });
            
            // Botão para adicionar meta anual
            addYearGoalBtn.addEventListener('click', () => {
                document.getElementById('goalType').value = 'year';
                document.getElementById('modalTitle').textContent = 'Adicionar Meta Anual';
                document.getElementById('goalId').value = '';
                document.getElementById('goalTitle').value = '';
                document.getElementById('goalDescription').value = '';
                document.getElementById('goalTarget').value = '';
                document.getElementById('goalProgress').value = 0;
                document.getElementById('progressValue').textContent = '0%';
                document.getElementById('goalColor').value = '#3b82f6';
                
                goalModal.style.display = 'flex';
            });
            
            // Botão para adicionar tarefa semanal
            addWeekTaskBtn.addEventListener('click', () => {
                openTaskModal();
            });
            
            // Botão para adicionar hábito
            addHabitBtn.addEventListener('click', () => {
                const habitName = prompt('Nome do novo hábito:');
                if (habitName && habitName.trim()) {
                    const newHabit = {
                        id: Date.now(),
                        name: habitName.trim(),
                        completed: false
                    };
                    habits.push(newHabit);
                    saveData();
                    renderHabits();
                    renderWeekView();
                    updateInsights();
                }
            });
            
            // Formulário de meta
            goalForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const id = document.getElementById('goalId').value || Date.now();
                const type = document.getElementById('goalType').value;
                const title = document.getElementById('goalTitle').value.trim();
                const description = document.getElementById('goalDescription').value.trim();
                const target = document.getElementById('goalTarget').value.trim();
                const progress = parseInt(document.getElementById('goalProgress').value);
                const color = document.getElementById('goalColor').value;
                
                if (!title) {
                    alert('Por favor, insira um título para a meta!');
                    return;
                }
                
                const goal = {
                    id: parseInt(id),
                    title,
                    description,
                    target,
                    progress,
                    color
                };
                
                if (type === 'year') {
                    // Adicionar ou atualizar meta anual
                    const existingIndex = yearGoals.findIndex(g => g.id === goal.id);
                    if (existingIndex >= 0) {
                        yearGoals[existingIndex] = goal;
                    } else {
                        goal.id = Date.now();
                        yearGoals.push(goal);
                    }
                } else {
                    // Adicionar ou atualizar meta mensal
                    goal.month = currentMonth;
                    const existingIndex = monthGoals.findIndex(g => g.id === goal.id);
                    if (existingIndex >= 0) {
                        monthGoals[existingIndex] = goal;
                    } else {
                        goal.id = Date.now();
                        monthGoals.push(goal);
                    }
                }
                
                saveData();
                
                if (type === 'year') {
                    renderYearGoals();
                } else {
                    renderMonthGoals();
                    renderMonthProgress();
                }
                
                updateInsights();
                closeGoalModal();
            });
            
            // Formulário de tarefa
            taskForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const id = document.getElementById('taskId').value || Date.now();
                const title = document.getElementById('taskTitle').value.trim();
                const day = document.getElementById('taskDay').value;
                const priority = document.getElementById('taskPriority').value;
                const duration = parseInt(document.getElementById('taskDuration').value);
                const category = document.getElementById('taskCategory').value;
                
                if (!title) {
                    alert('Por favor, insira um título para a tarefa!');
                    return;
                }
                
                const task = {
                    id: parseInt(id),
                    title,
                    day,
                    priority,
                    duration,
                    category,
                    completed: false
                };
                
                // Adicionar ou atualizar tarefa
                const existingIndex = tasks.findIndex(t => t.id === task.id);
                if (existingIndex >= 0) {
                    tasks[existingIndex] = task;
                } else {
                    task.id = Date.now();
                    tasks.push(task);
                }
                
                saveData();
                renderWeekView();
                updateInsights();
                closeTaskModal();
            });
            
            // Controle do slider de progresso
            const progressSlider = document.getElementById('goalProgress');
            const progressValue = document.getElementById('progressValue');
            
            progressSlider.addEventListener('input', function() {
                progressValue.textContent = `${this.value}%`;
            });
            
            // Fechar modais
            document.getElementById('closeModal').addEventListener('click', closeGoalModal);
            document.getElementById('cancelBtn').addEventListener('click', closeGoalModal);
            document.getElementById('closeTaskModal').addEventListener('click', closeTaskModal);
            document.getElementById('cancelTaskBtn').addEventListener('click', closeTaskModal);
            
            // Fechar modais ao clicar fora
            goalModal.addEventListener('click', function(e) {
                if (e.target === goalModal) closeGoalModal();
            });
            
            taskModal.addEventListener('click', function(e) {
                if (e.target === taskModal) closeTaskModal();
            });
            
            // Timer Pomodoro
            startTimerBtn.addEventListener('click', startPomodoroTimer);
            stopTimerBtn.addEventListener('click', stopPomodoroTimer);
            resetTimerBtn.addEventListener('click', resetPomodoroTimer);
        }

        // Funções de modal
        function openTaskModal(dayId = null) {
            if (dayId) {
                document.getElementById('taskDay').value = dayId;
            }
            
            document.getElementById('taskModalTitle').textContent = 'Adicionar Nova Tarefa';
            document.getElementById('taskId').value = '';
            document.getElementById('taskTitle').value = '';
            document.getElementById('taskDay').value = dayId || 'segunda';
            document.getElementById('taskPriority').value = 'A';
            document.getElementById('taskDuration').value = '25';
            document.getElementById('taskCategory').value = 'Minhas Coisas';
            
            taskModal.style.display = 'flex';
        }

        function closeGoalModal() {
            goalModal.style.display = 'none';
            goalForm.reset();
        }

        function closeTaskModal() {
            taskModal.style.display = 'none';
            taskForm.reset();
        }

        // Funções para metas
        function editGoal(id, type) {
            let goal;
            
            if (type === 'year') {
                goal = yearGoals.find(g => g.id === id);
                document.getElementById('goalType').value = 'year';
                document.getElementById('modalTitle').textContent = 'Editar Meta Anual';
            } else {
                goal = monthGoals.find(g => g.id === id);
                document.getElementById('goalType').value = 'month';
                document.getElementById('modalTitle').textContent = 'Editar Meta Mensal';
            }
            
            if (goal) {
                document.getElementById('goalId').value = goal.id;
                document.getElementById('goalTitle').value = goal.title;
                document.getElementById('goalDescription').value = goal.description || '';
                document.getElementById('goalTarget').value = goal.target || '';
                document.getElementById('goalProgress').value = goal.progress;
                document.getElementById('progressValue').textContent = `${goal.progress}%`;
                document.getElementById('goalColor').value = goal.color;
                
                goalModal.style.display = 'flex';
            }
        }

        function deleteGoal(id, type) {
            if (!confirm('Tem certeza que deseja excluir esta meta?')) return;
            
            if (type === 'year') {
                yearGoals = yearGoals.filter(g => g.id !== id);
                renderYearGoals();
            } else {
                monthGoals = monthGoals.filter(g => g.id !== id);
                renderMonthGoals();
                renderMonthProgress();
            }
            
            saveData();
            updateInsights();
        }

        // Funções para hábitos
        function toggleHabit(id) {
            const habit = habits.find(h => h.id === id);
            if (habit) {
                habit.completed = !habit.completed;
                habit.lastCompleted = habit.completed ? new Date().toDateString() : null;
                saveData();
                renderHabits();
                renderWeekView();
                updateInsights();
            }
        }

        // Funções para tarefas
        function addTaskForDay(dayId) {
            openTaskModal(dayId);
        }

        // Timer Pomodoro
        function startPomodoroTimer() {
            if (pomodoroRunning) return;
            
            pomodoroRunning = true;
            startTimerBtn.disabled = true;
            stopTimerBtn.disabled = false;
            
            pomodoroTimer = setInterval(() => {
                pomodoroTimeLeft--;
                updateTimerDisplay();
                
                if (pomodoroTimeLeft <= 0) {
                    clearInterval(pomodoroTimer);
                    pomodoroRunning = false;
                    
                    // Aumentar contador de pomodoros hoje
                    pomodorosToday++;
                    saveData();
                    updateInsights();
                    
                    // Notificação
                    alert('Pomodoro concluído! Hora de uma pausa.');
                    resetPomodoroTimer();
                    
                    // Iniciar temporizador de pausa (5 minutos)
                    pomodoroTimeLeft = 5 * 60;
                    updateTimerDisplay();
                    startTimerBtn.disabled = false;
                    stopTimerBtn.disabled = true;
                }
            }, 1000);
        }

        function stopPomodoroTimer() {
            clearInterval(pomodoroTimer);
            pomodoroRunning = false;
            startTimerBtn.disabled = false;
            stopTimerBtn.disabled = true;
        }

        function resetPomodoroTimer() {
            stopPomodoroTimer();
            pomodoroTimeLeft = 25 * 60;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(pomodoroTimeLeft / 60);
            const seconds = pomodoroTimeLeft % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Inicializar aplicação quando a página carregar
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>